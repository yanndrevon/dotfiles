"use strict";function _interopNamespaceDefault(t){var e=Object.create(null);return t&&Object.keys(t).forEach((function(i){if("default"!==i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}})),e.default=t,Object.freeze(e)}var t=_interopNamespaceDefault(require("vscode")),e={t:{i:"MonokaiPro-VSCode",o:["Monokai Pro","Monokai Pro (Filter Octagon)","Monokai Pro (Filter Ristretto)","Monokai Pro (Filter Spectrum)","Monokai Pro (Filter Machine)","Monokai Pro Light","Monokai Pro Light (Filter Sun)","Monokai Classic"],h:"Monokai Pro theme and color scheme for Visual Studio Code",u:"2.0.12",l:"Monokai",m:2026,_:"7-1-2026",p:"fd330f6f-3f41-421d-9fe5-de742d0c54c0",T:172800,g:86400,S:604800}};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var i,s,n,o,r,a,h={exports:{}},c={exports:{}};function requireCrypt(){return i||(i=1,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&e.rotl(t,8)|4278255360&e.rotl(t,24);for(var i=0;i<t.length;i++)t[i]=e.endian(t[i]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],i=0,s=0;i<t.length;i++,s+=8)e[s>>>5]|=t[i]<<24-s%32;return e},wordsToBytes:function(t){for(var e=[],i=0;i<32*t.length;i+=8)e.push(t[i>>>5]>>>24-i%32&255);return e},bytesToHex:function(t){for(var e=[],i=0;i<t.length;i++)e.push((t[i]>>>4).toString(16)),e.push((15&t[i]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],i=0;i<t.length;i+=2)e.push(parseInt(t.substr(i,2),16));return e},bytesToBase64:function(e){for(var i=[],s=0;s<e.length;s+=3)for(var n=e[s]<<16|e[s+1]<<8|e[s+2],o=0;o<4;o++)8*s+6*o<=8*e.length?i.push(t.charAt(n>>>6*(3-o)&63)):i.push("=");return i.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var i=[],s=0,n=0;s<e.length;n=++s%4)0!=n&&i.push((t.indexOf(e.charAt(s-1))&Math.pow(2,-2*n+8)-1)<<2*n|t.indexOf(e.charAt(s))>>>6-2*n);return i}},c.exports=e),c.exports;var t,e}function requireCharenc(){if(n)return s;n=1;var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(t){for(var e=[],i=0;i<t.length;i++)e.push(255&t.charCodeAt(i));return e},bytesToString:function(t){for(var e=[],i=0;i<t.length;i++)e.push(String.fromCharCode(t[i]));return e.join("")}}};return s=t}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var u=(a||(a=1,function(){var t=requireCrypt(),e=requireCharenc().utf8,i=function(){if(r)return o;function isBuffer(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}return r=1,o=function(t){return null!=t&&(isBuffer(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&isBuffer(t.slice(0,0))}(t)||!!t.v)}}(),s=requireCharenc().bin,md5=function(n,o){n.constructor==String?n=o&&"binary"===o.encoding?s.stringToBytes(n):e.stringToBytes(n):i(n)?n=Array.prototype.slice.call(n,0):Array.isArray(n)||n.constructor===Uint8Array||(n=n.toString());for(var r=t.bytesToWords(n),a=8*n.length,h=1732584193,c=-271733879,u=-1732584194,l=271733878,f=0;f<r.length;f++)r[f]=16711935&(r[f]<<8|r[f]>>>24)|4278255360&(r[f]<<24|r[f]>>>8);r[a>>>5]|=128<<a%32,r[14+(a+64>>>9<<4)]=a;var m=md5._ff,d=md5._gg,_=md5._hh,p=md5._ii;for(f=0;f<r.length;f+=16){var T=h,y=c,w=u,E=l;h=m(h,c,u,l,r[f+0],7,-680876936),l=m(l,h,c,u,r[f+1],12,-389564586),u=m(u,l,h,c,r[f+2],17,606105819),c=m(c,u,l,h,r[f+3],22,-1044525330),h=m(h,c,u,l,r[f+4],7,-176418897),l=m(l,h,c,u,r[f+5],12,1200080426),u=m(u,l,h,c,r[f+6],17,-1473231341),c=m(c,u,l,h,r[f+7],22,-45705983),h=m(h,c,u,l,r[f+8],7,1770035416),l=m(l,h,c,u,r[f+9],12,-1958414417),u=m(u,l,h,c,r[f+10],17,-42063),c=m(c,u,l,h,r[f+11],22,-1990404162),h=m(h,c,u,l,r[f+12],7,1804603682),l=m(l,h,c,u,r[f+13],12,-40341101),u=m(u,l,h,c,r[f+14],17,-1502002290),h=d(h,c=m(c,u,l,h,r[f+15],22,1236535329),u,l,r[f+1],5,-165796510),l=d(l,h,c,u,r[f+6],9,-1069501632),u=d(u,l,h,c,r[f+11],14,643717713),c=d(c,u,l,h,r[f+0],20,-373897302),h=d(h,c,u,l,r[f+5],5,-701558691),l=d(l,h,c,u,r[f+10],9,38016083),u=d(u,l,h,c,r[f+15],14,-660478335),c=d(c,u,l,h,r[f+4],20,-405537848),h=d(h,c,u,l,r[f+9],5,568446438),l=d(l,h,c,u,r[f+14],9,-1019803690),u=d(u,l,h,c,r[f+3],14,-187363961),c=d(c,u,l,h,r[f+8],20,1163531501),h=d(h,c,u,l,r[f+13],5,-1444681467),l=d(l,h,c,u,r[f+2],9,-51403784),u=d(u,l,h,c,r[f+7],14,1735328473),h=_(h,c=d(c,u,l,h,r[f+12],20,-1926607734),u,l,r[f+5],4,-378558),l=_(l,h,c,u,r[f+8],11,-2022574463),u=_(u,l,h,c,r[f+11],16,1839030562),c=_(c,u,l,h,r[f+14],23,-35309556),h=_(h,c,u,l,r[f+1],4,-1530992060),l=_(l,h,c,u,r[f+4],11,1272893353),u=_(u,l,h,c,r[f+7],16,-155497632),c=_(c,u,l,h,r[f+10],23,-1094730640),h=_(h,c,u,l,r[f+13],4,681279174),l=_(l,h,c,u,r[f+0],11,-358537222),u=_(u,l,h,c,r[f+3],16,-722521979),c=_(c,u,l,h,r[f+6],23,76029189),h=_(h,c,u,l,r[f+9],4,-640364487),l=_(l,h,c,u,r[f+12],11,-421815835),u=_(u,l,h,c,r[f+15],16,530742520),h=p(h,c=_(c,u,l,h,r[f+2],23,-995338651),u,l,r[f+0],6,-198630844),l=p(l,h,c,u,r[f+7],10,1126891415),u=p(u,l,h,c,r[f+14],15,-1416354905),c=p(c,u,l,h,r[f+5],21,-57434055),h=p(h,c,u,l,r[f+12],6,1700485571),l=p(l,h,c,u,r[f+3],10,-1894986606),u=p(u,l,h,c,r[f+10],15,-1051523),c=p(c,u,l,h,r[f+1],21,-2054922799),h=p(h,c,u,l,r[f+8],6,1873313359),l=p(l,h,c,u,r[f+15],10,-30611744),u=p(u,l,h,c,r[f+6],15,-1560198380),c=p(c,u,l,h,r[f+13],21,1309151649),h=p(h,c,u,l,r[f+4],6,-145523070),l=p(l,h,c,u,r[f+11],10,-1120210379),u=p(u,l,h,c,r[f+2],15,718787259),c=p(c,u,l,h,r[f+9],21,-343485551),h=h+T>>>0,c=c+y>>>0,u=u+w>>>0,l=l+E>>>0}return t.endian([h,c,u,l])};md5._ff=function(t,e,i,s,n,o,r){var a=t+(e&i|~e&s)+(n>>>0)+r;return(a<<o|a>>>32-o)+e},md5._gg=function(t,e,i,s,n,o,r){var a=t+(e&s|i&~s)+(n>>>0)+r;return(a<<o|a>>>32-o)+e},md5._hh=function(t,e,i,s,n,o,r){var a=t+(e^i^s)+(n>>>0)+r;return(a<<o|a>>>32-o)+e},md5._ii=function(t,e,i,s,n,o,r){var a=t+(i^(e|~s))+(n>>>0)+r;return(a<<o|a>>>32-o)+e},md5._blocksize=16,md5._digestsize=16,h.exports=function(e,i){if(null==e)throw new Error("Illegal argument "+e);var n=t.wordsToBytes(md5(e,i));return i&&i.asBytes?n:i&&i.asString?s.bytesToString(n):t.bytesToHex(n)}}()),h.exports),l=getDefaultExportFromCjs(u);class f{k="settings";constructor(t,e){this.M=t,this.I=e,this.P=!1}async O(){this.C(),this.D=this.M.secrets,await this.R(),await this.A()}async R(){try{const t=this.M.globalState,e=await this.N(),i=["firstTimeStamp","lastTimeStamp","thankYouMessageShown","lastVersionUpdateShown","email","licenseKey"],s={};for(const n of i){const i=t.get(n);if(null!=i){const o=e?.[n];void 0===o&&(s[n]=i),await t.update(n,void 0)}}Object.keys(s).length>0&&await this.U(s)}catch(t){}}C(){const t=this.I.workspace.getConfiguration("workbench");this.V=e.t.u,this.$=t.colorTheme,this.B=t.iconTheme;const i=this.I.workspace.getConfiguration("monokaiPro");return this.j=i.get("fileIconsMonochrome",!1),this.L=i.get("minimal",!1),this.F()}F(){return{j:this.j,B:this.B,$:this.$}}async A(){const t=await this.N();this.H=Number(t?.firstTimeStamp??0),this.W=Number(t?.lastTimeStamp??0),this.H||(this.P=!0,this.H=this.q(),await this.U({firstTimeStamp:this.H})),this.W||(this.W=this.q(),await this.U({lastTimeStamp:this.W})),this.K=!0===(t?.thankYouMessageShown??!1),this.G=t?.lastVersionUpdateShown??"0.0.0",this.Y=t?.email??"",this.J=t?.licenseKey??""}async X(t,e={}){const i=`${t}${this.j?" Monochrome ":" "}Icons`,s=this.I.workspace.getConfiguration("workbench"),n=s.iconTheme;return t!==e.$&&await s.update("colorTheme",t,!0),(this.Z(n)||this.P)&&i!==e.B&&await s.update("iconTheme",i,!0),this.C()}async N(){let t;try{const e=await this.D.get(this.k);null!=e&&(t=JSON.parse(e))}catch(t){}return t}async U(t){let e;try{const i=await this.N()??{};Object.entries(t).forEach((([t,e])=>{i[t]=e})),e=await this.D.store(this.k,JSON.stringify(i))}catch(t){}return e}q(){return Math.floor(Date.now()/1e3)}tt(t="",i=""){return!(!t||!i)&&i===l(`${e.t.p}${t}`).match(/.{1,5}/g).slice(0,5).join("-")}Z(t=""){return t&&e.t.o.includes(t?.replace?.(/ (Monochrome )?Icons$/,""))}get et(){return this.tt(this.Y,this.J)}get it(){return this.st?this.q()-this.W>e.t.g:this.q()-this.W>e.t.T}get st(){return this.W-this.H>e.t.S}get nt(){return e.t.o.includes(this.$)}get ot(){return this.Z(this.B)}}var m={install:{title:"Thanks for choosing Monokai Pro — Enjoy the trial!",actions:[{label:"register now",id:"OPEN-WEBSITE-VSCODE"}]},"2.0.12":{title:"Monokai Pro has been updated — Enjoy!",actions:[{only:"UNREGISTERED",label:"register now",id:"OPEN-WEBSITE-VSCODE"}]}};const d=new class{constructor(t,e){this.I=t,this.rt=e,this.ht=null,this.ct=null}ut(){return this.I.workspace.getConfiguration("window").get("autoDetectColorScheme")}lt(t){const i={"monokai_pro.enter_license":()=>this.ft(),"monokai_pro.select_theme":()=>this.dt(),"monokai_pro.activate_icons":()=>this._t()};Object.keys(i).forEach((e=>{const s=this.I.commands.registerCommand(e,i[e]);t.subscriptions.push(s)})),this.I.window.onDidChangeActiveColorTheme((async t=>{if(!this.ht)return;if(!this.ut())return;const i=this.I.workspace.getConfiguration("workbench"),s=i.get("preferredDarkColorTheme"),n=i.get("preferredLightColorTheme");this.I.window.activeColorTheme.kind===this.I.ColorThemeKind.Dark?e.t.o.includes(s)&&await this.ht.X(s):e.t.o.includes(n)&&await this.ht.X(n)})),this.I.workspace.onDidChangeConfiguration((async()=>{if(this.ht&&!this.ut()&&this.ht.nt){const t=this.ht.F(),e=await this.ht.C();await this.ht.X(e.$,t)}})),this.Tt(t)}async Tt(t){this.ht=new f(t,this.I),await this.ht.O(),(this.ht.nt||this.ht.ot)&&(await this.yt(),await this.wt())}ft(){this.I.window.showInputBox({ignoreFocusOut:!0,placeHolder:"your email address",prompt:"Please enter the email address you've used to purchase your license (or type 'reset' to reset your license).",validateInput:t=>"reset"===t||/.+@.+\..+/i.test(t)?null:"Please enter a valid email address."}).then((async t=>{const e=t.replace(/^\s+|\s+$/g,"");"reset"===e?(await this.ht.U({email:"",licenseKey:"",lastVersionUpdateShown:""}),this.Et()):e&&this.I.window.showInputBox({ignoreFocusOut:!0,placeHolder:"your license key",prompt:"Please enter your Monokai Pro license key."}).then((async t=>{if(t){const i=t.replace(/^\s+|\s+$/g,"");await this.ht.U({email:e??"",licenseKey:i??""}),this.ht.tt(e,i)||this.ht.tt(e.toLowerCase(),i)?this.gt():this.St()}}))}))}dt(){const t=[];e.t.o.forEach((e=>{t.push({label:e})})),this.I.window.showQuickPick(t,{placeHolder:"Monokai Pro theme"}).then((async t=>{t&&await this.ht.X(t.label)}))}async _t(){const t=this.I.workspace.getConfiguration("workbench");let e;this.ht.nt&&(e=`${this.ht.$}${this.ht.j?" Monochrome ":" "}Icons`),await t.update("iconTheme",e??"Monokai Pro Icons",!0)}async wt(){if(this.ht.et)clearTimeout(this.ct),this.ht.K||this.gt();else if(this.ht.it){if(this.ht.st)if(Math.random()<.5){clearTimeout(this.ct);const t=Math.floor(60*(55*Math.random()+5));this.ct=setTimeout((()=>{this.vt()}),1e3*t)}else this.vt();else this.vt();await this.ht.U({lastTimeStamp:this.ht.q()})}}async yt(){e.t.u!==this.ht.G&&(this.ht.G&&"0.0.0"!==this.ht.G?this.kt(e.t.u,"vscode-update-message"):this.kt("install","vscode-install-message"),await this.ht.U({lastVersionUpdateShown:e.t.u}))}Mt(){clearTimeout(this.ct)}Et(){this.I.window.showInformationMessage("Monokai Pro license information is reset")}async gt(){clearTimeout(this.ct),this.I.window.showInformationMessage("Thanks for your purchase of Monokai Pro.",{modal:!0}),await this.ht.U({thankYouMessageShown:!0})}async kt(t,i="default"){const s={theme:this.ht.$,version:e.t.u,name:e.t.i,ref:i};if(m?.[t]?.title){const e=await this.I.window.showInformationMessage(m[t].title,...m[t].actions?m[t].actions.filter((t=>!t.only||this.ht.et&&/^REGISTERED$/i.test(t.only)||!this.ht.et&&/^UNREGISTERED$/i.test(t.only))).map((t=>t.label)):[]);switch(m[t].actions?.find((t=>t.label===e))?.id?.toUpperCase()){case"OPEN-WEBSITE":this.It(s);break;case"OPEN-WEBSITE-VSCODE":this.It(s,"/vscode");break;case"ACTIVATE-THEME":await this.ht.X("Monokai Pro");break;case"ACTIVATE-THEME-LIGHT":await this.ht.X("Monokai Pro Light")}}}St(){this.I.window.showErrorMessage("Invalid license. Please enter your email and license key exactly as in the email.")}vt(){const t={theme:this.ht.$,version:e.t.u,name:e.t.i};this.I.window.showInformationMessage("Thank you for trying Monokai Pro. Register now to continue using it and help support future updates.",{modal:!0},"OK").then((e=>{e&&"OK"===e.toUpperCase()&&this.It(t)}))}It(t,e=""){const i=Object.keys(t).map((e=>`${e}=${encodeURIComponent(t[e])}`)).join("&");this.rt?this.rt(`https://monokai.pro${e}${i?`?${i}`:""}`):this.I.env.openExternal("https://monokai.pro"+(i?`?${i}`:""))}Pt(t){return t.replace(/ /g,"_")}}(t);exports.activate=function(t){d.lt(t)},exports.deactivate=function(){d.Mt()};
